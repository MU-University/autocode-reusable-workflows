<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/.github/workflows/README.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/.github/workflows/README.md" />
              <option name="originalContent" value="- Use `@main` to reference the latest version, or use a specific tag/commit for stability&#10;- The repository containing reusable workflows must be in the same organization or be public&#10;- The reusable workflows must be in a `.github/workflows` directory&#10;&#10;## Notes&#10;&#10;4. Replace `your-org` with your actual GitHub organization name&#10;3. Set `WEBHOOK_URL` secret in repository settings if using notifications&#10;2. In cloned repositories, add the workflow file referencing these reusable workflows&#10;1. Ensure this repository is accessible to your organization&#10;&#10;## Setup Instructions&#10;&#10;```&#10;      java-distribution: 'temurin'&#10;      java-version: '21'&#10;    with:&#10;    uses: your-org/autocode-reusable-workflows/.github/workflows/maven-build-test.yml@main&#10;  build-java-21:&#10;jobs:&#10;```yaml&#10;&#10;### Custom Java Version&#10;&#10;```&#10;      WEBHOOK_URL: ${{ secrets.WEBHOOK_URL }}&#10;    secrets:&#10;      workflow-status: ${{ needs.build-and-test.result }}&#10;      webhook-url: ${{ secrets.WEBHOOK_URL }}&#10;    with:&#10;    uses: your-org/autocode-reusable-workflows/.github/workflows/notify-completion.yml@main&#10;    if: always()&#10;    needs: build-and-test&#10;  notify:&#10;&#10;      java-version: '17'&#10;    with:&#10;    uses: your-org/autocode-reusable-workflows/.github/workflows/maven-build-test.yml@main&#10;  build-and-test:&#10;jobs:&#10;&#10;  push:&#10;  workflow_dispatch:&#10;on:&#10;&#10;name: Build Test and Notify&#10;```yaml&#10;&#10;### With Notifications&#10;&#10;```&#10;      artifact-name: 'test-results'&#10;      java-version: '17'&#10;    with:&#10;    uses: your-org/autocode-reusable-workflows/.github/workflows/maven-build-test.yml@main&#10;  build-test-notify:&#10;jobs:&#10;&#10;    branches: [ main ]&#10;  push:&#10;  workflow_dispatch:&#10;on:&#10;&#10;name: Build and Test&#10;```yaml&#10;&#10;Create `.github/workflows/build.yml` in your cloned repository:&#10;&#10;### Basic Usage&#10;&#10;## Usage in Cloned Repositories&#10;&#10;- `WEBHOOK_URL` (optional): Alternative way to provide webhook URL securely&#10;**Secrets:**&#10;&#10;- `workflow-status` (required): Status to report (completed/failed/cancelled)&#10;- `webhook-url` (required): Webhook URL for notifications&#10;**Inputs:**&#10;&#10;Sends webhook notification when a workflow completes.&#10;&#10;### 2. Notify Completion (`notify-completion.yml`)&#10;&#10;- `test-status`: Test outcome (success/failure)&#10;- `build-status`: Build outcome (success/failure)&#10;**Outputs:**&#10;&#10;- `artifact-name` (optional, default: 'test-results'): Name for test results artifact&#10;- `java-distribution` (optional, default: 'temurin'): Java distribution&#10;- `java-version` (optional, default: '17'): Java version to use&#10;**Inputs:**&#10;&#10;Builds and tests a Maven project with configurable Java version and distribution.&#10;&#10;### 1. Maven Build and Test (`maven-build-test.yml`)&#10;&#10;## Available Workflows&#10;&#10;This repository contains reusable GitHub Actions workflows for building, testing, and notifying completion of Maven projects.&#10;&#10;&#10;&#10;&#10;" />
              <option name="updatedContent" value="# Private Reusable Workflows for Maven Projects&#10;&#10;This repository contains private reusable GitHub Actions workflows for building, testing, and notifying completion of Maven projects.&#10;&#10;## Available Workflows&#10;&#10;### 1. Maven Build, Test, and Notify (`maven-build-test.yml`)&#10;&#10;Builds and tests a Maven project, then sends a notification webhook upon completion.&#10;&#10;**Inputs:**&#10;- `java-version` (optional, default: '17'): Java version to use&#10;- `java-distribution` (optional, default: 'temurin'): Java distribution&#10;- `artifact-name` (optional, default: 'test-results'): Name for test results artifact&#10;- `webhook-url` (optional): Webhook URL for completion notifications&#10;- `template-repo` (optional): Template repository containing test files (e.g., 'your-org/template-repo')&#10;- `template-tests-path` (optional, default: 'src/test/java'): Path to tests in template repository&#10;- `template-ref` (optional, default: 'main'): Branch/tag/commit to checkout from template repo&#10;&#10;**Secrets:**&#10;- `WEBHOOK_URL` (optional): Alternative way to provide webhook URL securely (recommended)&#10;- `TEMPLATE_REPO_TOKEN` (optional): Token to access private template repository&#10;&#10;**Features:**&#10;- Builds Maven project with error reporting&#10;- Runs tests and uploads results as artifacts&#10;- **Loads tests from a template repository** (optional)&#10;- Automatically notifies webhook endpoint with build status&#10;- Sends detailed information including repository, branch, commit, and run details&#10;&#10;## Usage in Cloned Repositories&#10;&#10;### With Template Repository Tests (Recommended for Assignments)&#10;&#10;This is useful when you want to keep test files separate from student code:&#10;&#10;```yaml&#10;name: Build and Test Maven Project&#10;&#10;on:&#10;  workflow_dispatch:&#10;  push:&#10;&#10;jobs:&#10;  build-test-notify:&#10;    uses: your-org/autocode-reusable-workflows/.github/workflows/maven-build-test.yml@main&#10;    with:&#10;      java-version: '17'&#10;      template-repo: 'your-org/java-assignment-template'&#10;      template-tests-path: 'src/test/java'&#10;      template-ref: 'main'&#10;    secrets:&#10;      WEBHOOK_URL: ${{ secrets.WEBHOOK_URL }}&#10;      TEMPLATE_REPO_TOKEN: ${{ secrets.GITHUB_TOKEN }}&#10;```&#10;&#10;### Basic Usage with Notification&#10;&#10;Create `.github/workflows/build.yml` in your cloned repository:&#10;&#10;```yaml&#10;name: Build and Test Maven Project&#10;&#10;on:&#10;  workflow_dispatch:&#10;  push:&#10;    branches: [ main ]&#10;&#10;jobs:&#10;  build-test-notify:&#10;    uses: your-org/autocode-reusable-workflows/.github/workflows/maven-build-test.yml@main&#10;    with:&#10;      java-version: '17'&#10;      artifact-name: 'test-results'&#10;      webhook-url: 'https://your-webhook-endpoint.com/workflow/results'&#10;    secrets:&#10;      WEBHOOK_URL: ${{ secrets.WEBHOOK_URL }}&#10;```&#10;&#10;### Using Secret for Webhook URL (Recommended)&#10;&#10;```yaml&#10;name: Build and Test Maven Project&#10;&#10;on:&#10;  workflow_dispatch:&#10;  push:&#10;&#10;jobs:&#10;  build-test-notify:&#10;    uses: your-org/autocode-reusable-workflows/.github/workflows/maven-build-test.yml@main&#10;    with:&#10;      java-version: '17'&#10;    secrets:&#10;      WEBHOOK_URL: ${{ secrets.WEBHOOK_URL }}&#10;```&#10;&#10;### Custom Java Version&#10;&#10;```yaml&#10;jobs:&#10;  build-java-21:&#10;    uses: your-org/autocode-reusable-workflows/.github/workflows/maven-build-test.yml@main&#10;    with:&#10;      java-version: '21'&#10;      java-distribution: 'temurin'&#10;    secrets:&#10;      WEBHOOK_URL: ${{ secrets.WEBHOOK_URL }}&#10;```&#10;&#10;### Custom Test Path in Template&#10;&#10;If your tests are in a different location:&#10;&#10;```yaml&#10;jobs:&#10;  build-with-custom-tests:&#10;    uses: your-org/autocode-reusable-workflows/.github/workflows/maven-build-test.yml@main&#10;    with:&#10;      template-repo: 'your-org/java-assignment-template'&#10;      template-tests-path: 'tests'  # Custom path&#10;      template-ref: 'v1.0.0'        # Use a specific version&#10;    secrets:&#10;      WEBHOOK_URL: ${{ secrets.WEBHOOK_URL }}&#10;      TEMPLATE_REPO_TOKEN: ${{ secrets.PAT_TOKEN }}&#10;```&#10;&#10;### Without Notifications&#10;&#10;To skip notifications, simply don't provide `webhook-url` input or `WEBHOOK_URL` secret:&#10;&#10;```yaml&#10;jobs:&#10;  build-only:&#10;    uses: your-org/autocode-reusable-workflows/.github/workflows/maven-build-test.yml@main&#10;    with:&#10;      java-version: '17'&#10;```&#10;&#10;## Template Repository Setup&#10;&#10;### Structure&#10;&#10;Your template repository should have tests organized like this:&#10;&#10;```&#10;your-org/java-assignment-template/&#10;├── src/&#10;│   └── test/&#10;│       └── java/&#10;│           └── com/&#10;│               └── example/&#10;│                   ├── CalculatorTest.java&#10;│                   └── StringUtilsTest.java&#10;└── README.md&#10;```&#10;&#10;### Access Requirements&#10;&#10;- **Public template repo**: No additional setup needed&#10;- **Private template repo**: Use `TEMPLATE_REPO_TOKEN` secret with a Personal Access Token (PAT) that has `repo` scope&#10;&#10;### Best Practices&#10;&#10;1. **Version your tests**: Use tags or branches for different test versions&#10;2. **Keep tests separate**: Don't include student code in template repo&#10;3. **Document test requirements**: Add README explaining what students need to implement&#10;&#10;## Webhook Notification Payload&#10;&#10;The workflow sends the following JSON payload to the webhook:&#10;&#10;```json&#10;{&#10;  &quot;status&quot;: &quot;completed&quot;,  // or &quot;failed&quot;&#10;  &quot;repository&quot;: {&#10;    &quot;name&quot;: &quot;owner/repo-name&quot;,&#10;    &quot;owner&quot;: &quot;owner&quot;&#10;  },&#10;  &quot;branch&quot;: &quot;main&quot;,&#10;  &quot;commit&quot;: &quot;abc123...&quot;,&#10;  &quot;runId&quot;: &quot;123456789&quot;,&#10;  &quot;runNumber&quot;: &quot;42&quot;,&#10;  &quot;conclusion&quot;: &quot;success&quot;  // or &quot;failure&quot;, &quot;cancelled&quot;, etc.&#10;}&#10;```&#10;&#10;## Setup Instructions&#10;&#10;1. **Set up this repository:**&#10;   - Ensure this repository is accessible to your organization&#10;   - Go to Settings → Actions → General&#10;   - Under &quot;Access&quot;, select &quot;Accessible from repositories in the 'your-org' organization&quot;&#10;&#10;2. **Set up template repository (if using):**&#10;   - Create a repository for your test files&#10;   - Organize tests in the appropriate directory structure&#10;   - If private, ensure it's accessible to your organization&#10;&#10;3. **In each cloned repository:**&#10;   - Create `.github/workflows/build.yml` using the template&#10;   - Replace `your-org` with your GitHub organization name&#10;   - Add `WEBHOOK_URL` secret in repository Settings → Secrets and variables → Actions&#10;   - Set `WEBHOOK_URL` to your notification endpoint&#10;   - (Optional) Add `TEMPLATE_REPO_TOKEN` if using a private template repository&#10;&#10;4. **Test the workflow:**&#10;   - Trigger manually via Actions tab → Build and Test Maven Project → Run workflow&#10;   - Or push to main branch&#10;&#10;## Notes&#10;&#10;- The reusable workflow combines build, test, and notification in a single workflow&#10;- Tests from template repository are copied before running Maven build&#10;- Notifications are sent regardless of build success or failure&#10;- For private reusable workflows, calling repositories must be in the same organization&#10;- Use `@main` to reference the latest version, or use a specific tag/commit for stability&#10;- The `workflow_run` trigger cannot be used with reusable workflows, so notification is integrated into the main workflow&#10;&#10;## Migration from Old Workflows&#10;&#10;If you previously had separate &quot;Build and Test&quot; and &quot;Notify Completion&quot; workflows:&#10;&#10;**Old approach (2 workflows):**&#10;- `build-test.yml` - Build and test&#10;- `notify.yml` - Triggered by `workflow_run`&#10;&#10;**New approach (1 workflow):**&#10;- Single workflow that builds, tests, and notifies&#10;&#10;Simply replace both old workflows with the new template, and the notification will happen automatically after build completion." />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>